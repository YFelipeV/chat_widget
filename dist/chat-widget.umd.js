(function(v,p){typeof exports=="object"&&typeof module<"u"?module.exports=p(require("react")):typeof define=="function"&&define.amd?define(["react"],p):(v=typeof globalThis<"u"?globalThis:v||self,v.ChatWidget=p(v.React))})(this,function(v){"use strict";var p={exports:{}},k={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $;function xe(){if($)return k;$=1;var l=Symbol.for("react.transitional.element"),m=Symbol.for("react.fragment");function E(A,c,g){var b=null;if(g!==void 0&&(b=""+g),c.key!==void 0&&(b=""+c.key),"key"in c){g={};for(var w in c)w!=="key"&&(g[w]=c[w])}else g=c;return c=g.ref,{$$typeof:l,type:A,key:b,ref:c!==void 0?c:null,props:g}}return k.Fragment=m,k.jsx=E,k.jsxs=E,k}var U={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ee;function he(){return ee||(ee=1,process.env.NODE_ENV!=="production"&&function(){function l(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Pe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case B:return"Fragment";case Te:return"Portal";case ne:return"Profiler";case re:return"StrictMode";case V:return"Suspense";case K:return"SuspenseList"}if(typeof e=="object")switch(typeof e.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),e.$$typeof){case se:return(e.displayName||"Context")+".Provider";case oe:return(e._context.displayName||"Context")+".Consumer";case L:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Z:return t=e.displayName||null,t!==null?t:l(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return l(e(t))}catch{}}return null}function m(e){return""+e}function E(e){try{m(e);var t=!1}catch{t=!0}if(t){t=console;var r=t.error,s=typeof Symbol=="function"&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object";return r.call(t,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",s),m(e)}}function A(){}function c(){if(Y===0){le=console.log,ce=console.info,ue=console.warn,fe=console.error,de=console.group,ve=console.groupCollapsed,me=console.groupEnd;var e={configurable:!0,enumerable:!0,value:A,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}Y++}function g(){if(Y--,Y===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:T({},e,{value:le}),info:T({},e,{value:ce}),warn:T({},e,{value:ue}),error:T({},e,{value:fe}),group:T({},e,{value:de}),groupCollapsed:T({},e,{value:ve}),groupEnd:T({},e,{value:me})})}0>Y&&console.error("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}function b(e){if(H===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||"",Ee=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+H+e+Ee}function w(e,t){if(!e||D)return"";var r=_.get(e);if(r!==void 0)return r;D=!0,r=Error.prepareStackTrace,Error.prepareStackTrace=void 0;var s=null;s=N.H,N.H=null,c();try{var u={DetermineComponentFrameRoot:function(){try{if(t){var R=function(){throw Error()};if(Object.defineProperty(R.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(R,[])}catch(h){var M=h}Reflect.construct(e,[],R)}else{try{R.call()}catch(h){M=h}e.call(R.prototype)}}else{try{throw Error()}catch(h){M=h}(R=e())&&typeof R.catch=="function"&&R.catch(function(){})}}catch(h){if(h&&M&&typeof h.stack=="string")return[h.stack,M.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var n=u.DetermineComponentFrameRoot(),x=n[0],P=n[1];if(x&&P){var f=x.split(`
`),O=P.split(`
`);for(n=i=0;i<f.length&&!f[i].includes("DetermineComponentFrameRoot");)i++;for(;n<O.length&&!O[n].includes("DetermineComponentFrameRoot");)n++;if(i===f.length||n===O.length)for(i=f.length-1,n=O.length-1;1<=i&&0<=n&&f[i]!==O[n];)n--;for(;1<=i&&0<=n;i--,n--)if(f[i]!==O[n]){if(i!==1||n!==1)do if(i--,n--,0>n||f[i]!==O[n]){var q=`
`+f[i].replace(" at new "," at ");return e.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",e.displayName)),typeof e=="function"&&_.set(e,q),q}while(1<=i&&0<=n);break}}}finally{D=!1,N.H=s,g(),Error.prepareStackTrace=r}return f=(f=e?e.displayName||e.name:"")?b(f):"",typeof e=="function"&&_.set(e,f),f}function C(e){if(e==null)return"";if(typeof e=="function"){var t=e.prototype;return w(e,!(!t||!t.isReactComponent))}if(typeof e=="string")return b(e);switch(e){case V:return b("Suspense");case K:return b("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case L:return e=w(e.render,!1),e;case Z:return C(e.type);case X:t=e._payload,e=e._init;try{return C(e(t))}catch{}}return""}function I(){var e=N.A;return e===null?null:e.getOwner()}function z(e){if(ie.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return e.key!==void 0}function J(e,t){function r(){ge||(ge=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",t))}r.isReactWarning=!0,Object.defineProperty(e,"key",{get:r,configurable:!0})}function W(){var e=l(this.type);return be[e]||(be[e]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),e=this.props.ref,e!==void 0?e:null}function Q(e,t,r,s,u,i){return r=i.ref,e={$$typeof:F,type:e,key:t,props:i,_owner:u},(r!==void 0?r:null)!==null?Object.defineProperty(e,"ref",{enumerable:!1,get:W}):Object.defineProperty(e,"ref",{enumerable:!1,value:null}),e._store={},Object.defineProperty(e._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(e,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.freeze&&(Object.freeze(e.props),Object.freeze(e)),e}function a(e,t,r,s,u,i){if(typeof e=="string"||typeof e=="function"||e===B||e===ne||e===re||e===V||e===K||e===Oe||typeof e=="object"&&e!==null&&(e.$$typeof===X||e.$$typeof===Z||e.$$typeof===se||e.$$typeof===oe||e.$$typeof===L||e.$$typeof===ke||e.getModuleId!==void 0)){var n=t.children;if(n!==void 0)if(s)if(G(n)){for(s=0;s<n.length;s++)y(n[s],e);Object.freeze&&Object.freeze(n)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else y(n,e)}else n="",(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(n+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports."),e===null?s="null":G(e)?s="array":e!==void 0&&e.$$typeof===F?(s="<"+(l(e.type)||"Unknown")+" />",n=" Did you accidentally export a JSX literal instead of a component?"):s=typeof e,console.error("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",s,n);if(ie.call(t,"key")){n=l(e);var x=Object.keys(t).filter(function(f){return f!=="key"});s=0<x.length?"{key: someKey, "+x.join(": ..., ")+": ...}":"{key: someKey}",Ae[n+s]||(x=0<x.length?"{"+x.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,s,n,x,n),Ae[n+s]=!0)}if(n=null,r!==void 0&&(E(r),n=""+r),z(t)&&(E(t.key),n=""+t.key),"key"in t){r={};for(var P in t)P!=="key"&&(r[P]=t[P])}else r=t;return n&&J(r,typeof e=="function"?e.displayName||e.name||"Unknown":e),Q(e,n,i,u,I(),r)}function y(e,t){if(typeof e=="object"&&e&&e.$$typeof!==Ue){if(G(e))for(var r=0;r<e.length;r++){var s=e[r];d(s)&&S(s,t)}else if(d(e))e._store&&(e._store.validated=1);else if(e===null||typeof e!="object"?r=null:(r=ae&&e[ae]||e["@@iterator"],r=typeof r=="function"?r:null),typeof r=="function"&&r!==e.entries&&(r=r.call(e),r!==e))for(;!(e=r.next()).done;)d(e.value)&&S(e.value,t)}}function d(e){return typeof e=="object"&&e!==null&&e.$$typeof===F}function S(e,t){if(e._store&&!e._store.validated&&e.key==null&&(e._store.validated=1,t=j(t),!je[t])){je[t]=!0;var r="";e&&e._owner!=null&&e._owner!==I()&&(r=null,typeof e._owner.tag=="number"?r=l(e._owner.type):typeof e._owner.name=="string"&&(r=e._owner.name),r=" It was passed a child from "+r+".");var s=N.getCurrentStack;N.getCurrentStack=function(){var u=C(e.type);return s&&(u+=s()||""),u},console.error('Each child in a list should have a unique "key" prop.%s%s See https://react.dev/link/warning-keys for more information.',t,r),N.getCurrentStack=s}}function j(e){var t="",r=I();return r&&(r=l(r.type))&&(t=`

Check the render method of \``+r+"`."),t||(e=l(e))&&(t=`

Check the top-level render call using <`+e+">."),t}var Ne=v,F=Symbol.for("react.transitional.element"),Te=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),re=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),oe=Symbol.for("react.consumer"),se=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),Oe=Symbol.for("react.offscreen"),ae=Symbol.iterator,Pe=Symbol.for("react.client.reference"),N=Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=Object.prototype.hasOwnProperty,T=Object.assign,ke=Symbol.for("react.client.reference"),G=Array.isArray,Y=0,le,ce,ue,fe,de,ve,me;A.__reactDisabledLog=!0;var H,Ee,D=!1,_=new(typeof WeakMap=="function"?WeakMap:Map),Ue=Symbol.for("react.client.reference"),ge,be={},Ae={},je={};U.Fragment=B,U.jsx=function(e,t,r,s,u){return a(e,t,r,!1,s,u)},U.jsxs=function(e,t,r,s,u){return a(e,t,r,!0,s,u)}}()),U}var te;function pe(){return te||(te=1,process.env.NODE_ENV==="production"?p.exports=xe():p.exports=he()),p.exports}var o=pe();const we="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABBCAYAAABlwHJGAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sDEhAFCREQTBkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAMzUlEQVR42uWbe5AV9ZXHP+fXfe/cYd6DBBApX0OKly6S4REpNasOL7MRcbO6Yx6uo0Q0gWQVs6F45UElVmklply3NgrRWjebhwrGQhJWNMbUgAUopgiDbFEkLo8CZ+IMjDP31b+zf3T3nb7zwHkxA25Pze17+3bf3+/3/Z3zPd9zft3CR2wrVjz0md///o3PjRo16v7Dhw/HVRUAVUVEOBe3sI+JRIKqqqqTx44d+7c1a1Y9Pm/evMbly5fz2GOPdbmmy0hef/11rrvuOm6++Zbrjx8//nxzc3O54zi5NsJrzlUQomCIiKqqiAjWWiZMqNpaUzN36bJlX/3LGYG4+eZFbN68iUWLbnnqwIF36xzHQX14RURySJ8vQIT9DN6riEg2m2XkyMrP7dhR/9KGDRuoq6vLB+KFF15g8eLFzJgxa09ra+v0c32g/QRHxTcTLrnk4ge3bn350TyLsNZijGHevPm/eu+9/701CtDHFRBVlcrKypvq6//wcp5FzJlzzdKmpqYnjDFnq/lIcwoqqESOKAwV5iHRZ7NZ3n571wWPPPKjplzTkydP1bMaCRQUG3wwIIpoeEQww2B5qsrEiROf3bTp+S+ao0ePs2DBTSuttXkkM+iNiiIYFOOjYgULOLgoyllq9oybiOiBAwe+8OSTGwoF4Morp72RzWbndBdO+279GuwlGJwiAp4H7VmHZErJWhBRUIeiAktB3CPmSF7z4U8hZ88awn1paelDLoDjODMzmYwM1C00cHZFEAWrkIgpKxef4uqpScpiyogCxTE+JyjQlhJaUoY/Hoqx9uflNCcF1+TEytm0hhxXFBUV3SCq6kycODlrjBkYPyhoQIiC4GUtz37jr1RPSGOtB55Bjf9t3qyoAfEQEUzMsv9wnK/9tJKjjQ6OI/k0O8gWEgJx4YVjEVUdO3Hi5GMDAUJV/Q6qkMkqKz/fwj/d8CFeWjrNQr6G64mPnJiyfW8hdz1RSVGBIghWrU+og2Ql0bYrKysxA3eFjg/pDDz9jUbuvOZDvJTg91ty/xq5SNG878J/RLBZw2emJKn//nHirg+ySNiUdrQ5QNeI7s2AhFPOHcACm1e+z6xLsliCQRPIW9Vg74dQVf8CVZ9I/KihqFpy4UNgTAn895r3ScQ8BKcb9AcHjDwg+vdLfshNZYU1i1uYNCaDiEUEjAnICLDBeY6jOIXK6XahsdXBemBGKE4QVKOCSxTEQEWRx2vfPklJwiIBwGcj0roDxBRFmHtlO7XXtuFZ34ZDThMRrILrCAeOxvjRS8X8etcICAaZ8oQxpR731Jzii9e1UV5og4EaJLA1I8KIAstv1pzgmlWfwHoCojklqiqDQhs5soyk2n0inIwH//P0MbyWoEOBblZVsihilX/44Wj2vxfDdTWY8zAaaDDLSmub4T8feJ85l2dQCaOPv1fxJXlbEq5ePRrPCwC3ijEDR6GioqJ/rqG5QShf/ts2Ms0dIITfIeCKZdqKcRw84hJzbWgnEXuS3A8WJ5R7nxjJ1r0jwGguVqooEsx6YULZ/YPjOI5F1A6qzDD9Dj2qtLS53Df3FCI2cBMNlKVgVLni6xdhcALS9EVWd7AKIEaxKCueLeVnvyvGhGCoouK/FQHHEfY8fAKrIag6XED4ktngcOWlKSorLaIShEOf9K14rN9Uhoqi1oIJkjnpnmf8qQ1CKPCDzcU8/VoxJnSRSHQygGOENx8+6QM0XBYRxnIryuzLU2haAhOXjk57hp+9UYRgsMYHqnfUK4H0Njy8uZy/WTEWJ2Yxjocx4IhgCjxueqSS2f8yClE7aFLT7Xuc6BBGpUUWVfFVcpBjIIoTmIYYQdQEmaf0xuciAseS8QwT77+IgriHa1w865HOukA2KGCY4QufiiIWMlguHOl1FFQksAZRvvVsRUcnhd6BEEnaQjmuajFiyGYNacn6oOL5v2ZkUAVF3y0irCxZcIx2BQnDm4dc/wQ1fbLcaEZ4+vRp2tvbqam5kRkzZ6DW8tZbb7Nly8uUlJRQUlKS443hEVTSYcLJtOkos+VmURlZBCc/kF5ZbufKeDabZd26tSxYMJ+Kiopur2lubmHLli2sWrWawsJCBqPCbugfW2KMcqLZCbjBy4kggK/ceCpIsvSMAEQ7n0wmWb58GQcPHqC29h8pLy/POyd6bllZKXfcUcvhw4d44IF/JpPJdEmizn7UEM2RZmvSgANGjc8PAYHVTE/nSafuAIl2PJVK8Ytf/BdLltyDqmKtzc9IexigqlJXdxc//vFjeJ43oFKj6Q9HEJjiG3+KYwot1gSySMQvS3lKzLVYNVi1PQgpf7PW8uabO6iuru6yKNPdoDofU1Xmzq3hl7/8OWEFvqdrB50jwjLa/iMFNJ10KC/yM1FRgxU/qry+7iSzV45FjPRYf7TWsn7996isrMzNeBSMQ4cOsWPHTvbvbwCUSZMm8elPz6aqqirvPBFh6tSprF69ilWrVhOLxYY+6brt2jZWL2oGTC45Cgu3P/ltIY9vLfWTML+Cnzfbn/zkBF58cXOX2W5vb+P22++goaGBeDyeN+h0Os1FF13Iq6++2qXkJiLcffcS6uvr+8QVFRUVAwdC1dDw7+/htbmIhPlk8B2w9lflPF9fiAmShTDbTKVSvPtuA2GJMBysMYarrqomnU7lDbLzPplMcfBgQxcuaWr6K9OmXUVJSUmvweh39hktQjpY7n9ilA+C+gqTyKC/8/fNfOn6VrwI2arCrFmzcF03DwQRYebM2aTTqbxjnfeqSkFBnPnzFxBdmVNVRo6spLq6emiyzw6/Ak/gN28V8Of3XcSaIBEKsg/xZfa3PnuahdPacws7IkJJSUleBDHG0NjYyKlTp3otvo4cOUpLS0sXQTZv3tyhBSIkv4KYsmD9BaRU8xKsMCfxRPnhvR+QiPnopVJJli37Wt7NJqrK0qX390oPRL+rq7uny7mzZs0ilUoNHRCqwQ+o4OJQ/dAYrNocGUpQWDEYbNJw+5wPQZVsNsOUKZPzBiYi7Nu3r9d+raoYY9i3b18Xsh09ejSZTGYIXUNyL1jJgApXPDAOJ5aNiCjJSaqyQj/FzhXsItagqjiO6UPbkrudoaecZehcI0IWghMMV6laOp62pJ8dGhtWmIREgYenmiv2dyeQejuI0CK6c5lksp2+RsHBAULDTvgkGXeF6SvGcToJnoSFGaXptINrOtUtI6GvL0lTCNjatau7AHr48J+Jx2NDD0SO4MIXUeKuZerXx9GW9pf9nYTy8t7CvMRtIMt1qkp7ezuLFi3qknnu2rWLWCw+DBYR0QgS/CFKSVGWiV8dx/EPDJv+MIK/nHAC8xkYCCHw69d/j3g83sWKnnvu+SHINT6ijAfR1WuH8pIMN3znE7gC8Zi/INOTSXQs2uTfudN5xtPpNLW1tdTW3p5bIQyt5JVXttPU1EQikRg+IKLrX4oJyvwGN6AFDURWZ5MIB57JZLoFIeQDa5UpUyZz771LWLhwYQCc5JHnunXf7jMIZw0IvzQfsRGJ6q+e/WLPnl3dLNr4ILiuy4gRI3pMxUWE2tov0Nzc3K/weZaA6LvPB7fw9GgRH/X5u99dz+7du3Fdt1/FmWEHorukqjfnR3nh1ls/T0NDA67r9rtcN+xAdCbE7jRFd6ILoLX1Q2bMmIkxBmPMgO4IdM8VEHqbZJ08eYKNG5/mmWeeASQHQHfC7Ly0CGstn/rUjDMKqEwmkyvsGuP0CczzAohwNv2qlJzRZTpXtAZSwj/nXSP6OXq8p/eDsZlzBYTgsZBhezLInAtuESW7/oihwQJCu1Nrw2EZ0Qjw/84iOuT1W2Sz2WFr3wCnhnrmO79PpZLcdtttw2KFqkosFsOISFsikfCGmhMAPM9j7969jB9/KYlE4YBFUX8nxBizzQ0O7gSuVtUheZSxtLSU0tJyiouLKSsrY9SoC4aNpAHa2tq2m82bN1FeXr4dfx10SGbEWsv48eP9pbaBPh4xYMNQvvnNFT/J9WDKlCs0lK8f9y2qVi+//LJXXnrp1zU5wV5VNaExmUwuHArXOFc2z/N48MEHrx0zZszpvOc+a2rmbj1y5Oj8qMj5mFqEApSVld2yc2f9izkdYYzh0UcfZdu23y4oKSl+B//x4W7vX/o4AKCqcvHFFz+0c2f9i+HTjTnX2LZtG++880emTZv+pKq9oqmpaVJgEblnw89XPohYePBs+MjFr722fePGjT9l+vTpPl90vvCppzZy9913cf31N/5dU1Pjc8lkKm6MyT1Tfb4AEk5+OEbP87jssst2VVVdetfjj//rvs7rptJTeAtPqqur++zu3XtuqqwcueTEiRPmfLIE13UZO3ZsU3Nz84Y77/zSf9x33337ejr//wDugY0m8fu7XwAAAABJRU5ErkJggg==",Ce=({onQuestionClick:l})=>{const m=["Por favor muestra una tabla con los datos principales de las sucursales registradas.","¿Cuáles son los servicios disponibles en PARE?","¿Cómo puedo contactar a soporte técnico?"];return o.jsxs("div",{className:"frequent-questions",children:[o.jsx("h3",{children:"Preguntas Frecuentes"}),o.jsx("ul",{children:m.map((E,A)=>o.jsx("li",{onClick:()=>l(E),children:E},A))})]})},Se=({message:l})=>o.jsx("div",{className:`message ${l.isUser?"user-message":"bot-message"}`,children:o.jsx("div",{className:"message-content-wrapper",children:o.jsx("div",{className:"message-content",dangerouslySetInnerHTML:{__html:l.text}})})});function Re(){const[l,m]=v.useState([]),[E,A]=v.useState(""),[c,g]=v.useState(!1),[b,w]=v.useState(!0),C=v.useRef(null);v.useEffect(()=>{I()},[]);const I=async()=>{try{const a=await getChatHistory();if(a.STATUS){const y=a.RSP.map(d=>({id:d.id,text:d.message,isUser:d.role==="user",status:"sent",timestamp:new Date(d.created_at)}));m(y)}}catch(a){console.error("Error cargando historial:",a)}finally{w(!1)}},z=()=>{if(C.current){const{scrollHeight:a}=C.current;C.current.scrollTo({top:a,behavior:"smooth"})}};v.useEffect(()=>{z()},[l,c]);const J=async(a=E)=>{if(a.trim()==="")return;const y={id:Date.now().toString(),text:a,isUser:!0,status:"sent",timestamp:new Date};m(d=>[...d,y]),A(""),g(!0);try{const d=await sendMessageApi({message:a});if(d.STATUS){const S={id:(Date.now()+1).toString(),text:d.RSP,isUser:!1,status:"sent",timestamp:new Date};m(j=>[...j,S])}else{A(a);const S={id:(Date.now()+1).toString(),text:"<p>Error, Intenta nuevamente</p>",isUser:!1,status:"sent",timestamp:new Date};m(j=>[...j,S])}}catch{m(S=>S.map(j=>j.id===y.id?{...j,status:"error"}:j))}finally{g(!1)}},W=a=>{a.preventDefault(),J()},Q=a=>{J(a)};return o.jsxs("div",{className:"chat-boot-container",children:[o.jsxs("div",{className:"chat-header",children:[o.jsx("div",{children:o.jsx("img",{src:we,className:"icon-header",alt:"Logo Corbot"})}),o.jsx("div",{children:o.jsx("span",{className:"title-header",children:"Cor-IA"})})]}),o.jsx("div",{ref:C,className:"messages-container",children:b?o.jsxs("div",{className:"loading-container",children:[o.jsxs("div",{className:"loading-dots",children:[o.jsx("div",{className:"dot"}),o.jsx("div",{className:"dot"}),o.jsx("div",{className:"dot"})]}),o.jsx("span",{className:"loading-text",children:"Cargando mensajes"})]}):o.jsxs(o.Fragment,{children:[l.length===0&&o.jsx(Ce,{onQuestionClick:Q}),l.map(a=>o.jsx(Se,{message:a},a.id)),c&&o.jsxs("div",{className:"typing-indicator",children:[o.jsx("span",{}),o.jsx("span",{}),o.jsx("span",{})]})]})}),o.jsxs("form",{onSubmit:W,className:"message-input",children:[o.jsx("input",{type:"text",value:E,onChange:a=>A(a.target.value),placeholder:"Escribe tu mensaje...",disabled:c||b,className:"message-input-field"}),o.jsx("button",{type:"submit",className:"send-button",disabled:c||b||E.trim()==="",children:o.jsx("i",{className:"ri-send-plane-fill"})})]})]})}function ye(){return o.jsx("div",{children:o.jsx("div",{className:"chat-toogle-content",children:o.jsx(Re,{})})})}return ye});
